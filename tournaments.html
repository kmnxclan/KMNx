<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>KMNx Clan - Tournaments</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<header class="header"><h1>KMNx Clan Tournaments</h1></header>

<nav class="nav">
  <a href="index.html">Home</a>
  <a href="about.html">About</a>
  <a href="members.html">Members</a>
  <a href="contact.html">Contact</a>
  <a href="tournaments.html">Tournaments</a>
</nav>

<main class="container">
  <section class="card">
    <h2>Register for Tournaments</h2>
    <form id="tournamentForm" class="register-form">
      <input type="text" id="discordName" placeholder="Discord Name" required>
      <input type="text" id="standoffId" placeholder="Standoff ID" required>
      <button class="primary" type="submit">Register</button>
    </form>
    <div id="registeredPlayers"></div>
  </section>
</main>

<footer>
  ¬© <span id="year"></span> KMNx Clan
  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, query, where } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

// üîπ Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyDvlY2m_xUCRppuu77D9BZk2UUyDY-XOwI",
  authDomain: "kmnxclan-2dcf6.firebaseapp.com",
  projectId: "kmnxclan-2dcf6",
  storageBucket: "kmnxclan-2dcf6.firebasestorage.app",
  messagingSenderId: "472738813283",
  appId: "1:472738813283:web:e341c076b64d8fe4006f56",
  measurementId: "G-BYNCFW576L"
};

// Init Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const form = document.getElementById("tournamentForm");
const registeredPlayers = document.getElementById("registeredPlayers");

async function renderPlayers() {
  registeredPlayers.innerHTML = "<h3>Registered Players:</h3>";
  const snap = await getDocs(collection(db, "players"));
  snap.forEach(doc => {
    const p = doc.data();
    registeredPlayers.innerHTML += `<p>${p.discord} ‚Äî ${p.id}</p>`;
  });
}

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  const discord = document.getElementById("discordName").value.trim();
  const id = document.getElementById("standoffId").value.trim();

  if (!discord || !id) { alert("Fill both fields"); return; }

  const q = query(collection(db, "players"), where("id","==",id));
  const snapshot = await getDocs(q);
  if (!snapshot.empty) { alert("‚ö†Ô∏è Standoff ID already registered!"); return; }

  try {
    await addDoc(collection(db, "players"), { discord: discord, id: id });
   
